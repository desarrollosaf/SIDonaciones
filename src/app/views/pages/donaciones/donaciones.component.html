<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<div class="row">
  <div class="col-md-12 stretch-card">
    <div class="card">
      <div class="card-body">

        @if(!mostrarForm){
        <div class="container py-4">
          <div class="row w-100 mx-0 auth-page">
            <div class="mx-auto col-12 col-md-11 col-lg-12" style="max-width: 1200px;">
              <div class="card shadow-sm">
                <div class="card-header bg-primary text-white text-center">
                  <h5 class="mb-0">Ingresa tus datos</h5>
                </div>
                <div class="card-body">
                  <form [formGroup]="registroForm" (ngSubmit)="enviardatos()">
                    <!-- Primera fila: Nombre completo y Cantidad -->
                    <div class="row mb-3">
                      <div class="col-12 col-sm-6">
                        <label class="form-label fw-bold">Nombre completo:</label>
                        <div class="form-control-plaintext border rounded p-2 bg-light text-dark">
                          {{ nombreCompleto }}
                        </div>
                      </div>
                      <div class="col-12 col-sm-6">
                        <label for="cantidad" class="form-label fw-semibold">Cantidad*:</label>
                        <div class="input-group">
                          <span class="input-group-text">
                            <i class="bi bi-cash-stack"></i>
                          </span>
                          <input id="cantidad" type="number" class="form-control" formControlName="cantidad"
                            placeholder="Ej. 15000"
                            [ngClass]="{ 'is-invalid': registroForm.get('cantidad')?.touched && registroForm.get('cantidad')?.invalid }" />
                        </div>
                        <div class="invalid-feedback d-block"
                          *ngIf="registroForm.get('cantidad')?.touched && registroForm.get('cantidad')?.invalid">
                          <div *ngIf="registroForm.get('cantidad')?.errors?.['required']">
                            La cantidad es obligatoria.
                          </div>
                          <div *ngIf="registroForm.get('cantidad')?.errors?.['pattern']">
                            Solo se permiten números enteros.
                          </div>
                          <div *ngIf="registroForm.get('cantidad')?.errors?.['max']">
                            La cantidad no puede ser mayor a 50,000.
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Segunda fila: Correo y Confirmar Correo -->
                    <div class="row mb-3">
                      <div class="col-12 col-sm-6">
                        <label for="correo" class="form-label fw-semibold">Correo*:</label>
                        <div class="input-group">
                          <span class="input-group-text">
                            <i class="bi bi-envelope"></i>
                          </span>
                          <input id="correo" type="email" class="form-control" formControlName="correo"
                            placeholder="ejemplo@correo.com" [ngClass]="{
                      'is-invalid':
                        (registroForm.get('correo')?.touched && registroForm.get('correo')?.invalid) ||
                        registroForm.errors?.correoNoCoincide
                    }" />
                        </div>
                        <div class="invalid-feedback d-block"
                          *ngIf="registroForm.get('correo')?.touched && registroForm.get('correo')?.invalid">
                          <div *ngIf="registroForm.get('correo')?.errors?.['required']">El correo es obligatorio.</div>
                          <div *ngIf="registroForm.get('correo')?.errors?.['email']">El correo no es válido.</div>
                        </div>
                      </div>
                      <div class="col-12 col-sm-6">
                        <label for="confirmarCorreo" class="form-label fw-semibold">Confirmar correo*:</label>
                        <div class="input-group">
                          <span class="input-group-text">
                            <i class="bi bi-envelope-check"></i>
                          </span>
                          <input id="confirmarCorreo" type="email" class="form-control"
                            formControlName="confirmarCorreo" placeholder="Confirma tu correo" [ngClass]="{
                      'is-invalid':
                        (registroForm.get('confirmarCorreo')?.touched && registroForm.get('confirmarCorreo')?.invalid) ||
                        registroForm.errors?.correoNoCoincide
                    }" />
                        </div>
                        <div class="invalid-feedback d-block"
                          *ngIf="registroForm.errors?.correoNoCoincide && registroForm.get('confirmarCorreo')?.touched">
                          Los correos no coinciden.
                        </div>
                      </div>
                    </div>

                    <!-- Tercera fila: Teléfono y Confirmar Teléfono -->
                    <div class="row mb-3">
                      <div class="col-12 col-sm-6">
                        <label for="telefono" class="form-label fw-semibold">Teléfono*:</label>
                        <div class="input-group">
                          <span class="input-group-text">
                            <i class="bi bi-telephone"></i>
                          </span>
                          <input id="telefono" type="text" class="form-control" formControlName="telefono"
                            placeholder="Solo números" [ngClass]="{
                      'is-invalid':
                        (registroForm.get('telefono')?.touched && registroForm.get('telefono')?.invalid) ||
                        registroForm.errors?.telefonoNoCoincide
                    }" />
                        </div>
                        <div class="invalid-feedback d-block"
                          *ngIf="registroForm.get('telefono')?.touched && registroForm.get('telefono')?.invalid">
                          <div *ngIf="registroForm.get('telefono')?.errors?.['required']">El teléfono es obligatorio.
                          </div>
                          <div *ngIf="registroForm.get('telefono')?.errors?.['pattern']">Solo se permiten números.</div>
                        </div>
                      </div>
                      <div class="col-12 col-sm-6">
                        <label for="confirmarTelefono" class="form-label fw-semibold">Confirmar teléfono*:</label>
                        <div class="input-group">
                          <span class="input-group-text">
                            <i class="bi bi-telephone-plus"></i>
                          </span>
                          <input id="confirmarTelefono" type="text" class="form-control"
                            formControlName="confirmarTelefono" placeholder="Confirma tu teléfono" [ngClass]="{
                      'is-invalid':
                        (registroForm.get('confirmarTelefono')?.touched && registroForm.get('confirmarTelefono')?.invalid) ||
                        registroForm.errors?.telefonoNoCoincide
                    }" />
                        </div>
                        <div class="invalid-feedback d-block"
                          *ngIf="registroForm.errors?.telefonoNoCoincide && registroForm.get('confirmarTelefono')?.touched">
                          Los teléfonos no coinciden.
                        </div>
                      </div>
                    </div>

                    <!-- Botón Enviar centrado con animación -->
                    <div class="d-flex justify-content-center mt-4">
                      <button type="submit" class="submit-anim-btn" [disabled]="registroForm.invalid || isSubmitting"
                        [ngClass]="{ animating: isSubmitting }">
                        <span *ngIf="!isSubmitting">Enviar</span>

                        <!-- SVG check (aparece al final de la animación) -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M0 11c2.761.575 6.312 1.688 9 3.438 
             3.157-4.23 8.828-8.187 15-11.438
             -5.861 5.775-10.711 12.328-14 18.917
             -2.651-3.766-5.547-7.271-10-10.917z" />
                        </svg>
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        }@else{
        <div class="container">
          <div class="row w-100 mx-0 auth-page">
            <div class="mx-auto">

              <h3 class="text-center mb-4">Mi donación</h3>



            </div>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
</div>